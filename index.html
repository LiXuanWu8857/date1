<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é¢¨æ»¾è‰ä½å®¿é‡‘é¡è¨ˆç®—æ©Ÿ</title>
  <style>
    @font-face {
      font-family: 'UDJingXiHei';
      src: url('https://cdn.jsdelivr.net/gh/font-store/fontstore-webfont/UDJingXiHeiPE1XG30_M.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    body {
      font-family: 'UDJingXiHei', 'Noto Sans TC', 'Microsoft JhengHei', sans-serif;
      padding: 20px;
      background-color: #ffe1ea;
      margin: 0;
      line-height: 1.6;
    }
    .brand-header {
  text-align: center;
  background-color: #fff4fa;
  padding: 15px 15px; /* åŸæœ¬ä¸Šä¸‹30px â†’ æ”¹ç‚º20px */
  border-radius: 15px;
  margin-bottom: 3px; /* åŸæœ¬15px â†’ æ”¹ç‚º10px */
  border: 2px solid #d72660;
  box-shadow: 0 5px 15px rgba(215, 38, 96, 0.1);
}

/* æ¨™é¡Œå…§æ–‡é è¨­ margin-bottom éå¤§ï¼Œç›´æ¥æ­¸é›¶ */
.brand-header h1,
.brand-header h2 {
  margin-bottom: 0;
}
    .brand-title { color: #d72660; font-size: 28px; margin-bottom: 15px; font-weight: bold; }
    .brand-subtitle { color: #d72660; font-size: 18px; margin-bottom: 20px; }
    .brand-description { color: #666; font-size: 14px; margin-bottom: 20px; line-height: 1.8; }
    .service-values { display: flex; justify-content: space-around; margin: 20px 0; flex-wrap: wrap; }
    .value-item { text-align: center; margin: 10px; flex: 1; min-width: 100px; }
    .value-chinese { color: #d72660; font-weight: bold; font-size: 16px; }
    .value-english { color: #888; font-size: 12px; font-style: italic; }
    .calculator-section { background-color: #fff4fa; padding: 25px; border-radius: 15px; border: 2px solid #d72660; box-shadow: 0 5px 15px rgba(215, 38, 96, 0.1);}
    h2 { color: #d72660; text-align: center; margin-bottom: 25px; }
    label { display: block; margin-top: 14px; color: #d72660; font-weight: bold; }
    input, select { width: 100%; padding: 12px; margin-top: 8px; font-size: 16px; border: 1.5px solid #d72660; border-radius: 8px; box-sizing: border-box; font-family: inherit; background-color: #fff; transition: border-color 0.3s;}
    input:focus, select:focus { outline: none; border-color: #b61a49; box-shadow: 0 0 5px rgba(215, 38, 96, 0.3); }
    button { margin-top: 20px; padding: 14px; font-size: 16px; background-color: #ff8fb2; color: #fff; border: none; border-radius: 8px; width: 100%; letter-spacing: 1px; transition: all 0.3s; font-family: inherit; cursor: pointer; font-weight: bold;}
    button:hover { background-color: #d72660; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(215, 38, 96, 0.3);}
    .clear-btn { background-color: #f7b2d9; color: #d72660; margin-bottom: 15px; margin-top: 10px;}
    .clear-btn:hover { background-color: #d72660; color: #fff; }
    .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(215, 38, 96, 0.15);}
    .modal-content { background-color: #fff4fa; margin: 8% auto; padding: 35px; border: 3px solid #d72660; border-radius: 20px; width: 90%; max-width: 450px; text-align: center; box-shadow: 0 15px 35px rgba(215, 38, 96, 0.2); color: #d72660; font-size: 18px; letter-spacing: 1px; position: relative; }
    .confirm-btn { margin-top: 25px; width: 70%; background-color: #d72660; color: #fff; font-size: 18px; border-radius: 10px; border: none; padding: 12px 0; font-weight: bold;}
    .confirm-btn:hover { background-color: #b61a49; }
    .hidden { display: none; }
    /*  æŒ‰éˆ•ç›´å¼æ’åˆ—
    .mode-toggle {
      display: flex;
      flex-direction: column;
      gap: 0px;  æŒ‰éˆ•é–“è· 
      margin-bottom: 15px;  èˆ‡ä¸‹æ–¹è¨ˆç®—æ©Ÿå€å¡Šé–“è· 
    }
    #stayCalculator,
    #homeCalculator {
      margin-top: 0;  ç§»é™¤é¡å¤–é–“è· 
    }
    @media (max-width: 600px) { 
      .service-values { flex-direction: column; } 
      .brand-title { font-size: 24px; } 
      .modal-content { margin: 15% auto; padding: 25px; } 
    }
    */
    .mode-toggle {
      display: flex;
      flex-direction: row; /* æ”¹æˆæ©«å‘æ’åˆ— */
      justify-content: center; /* æ°´å¹³ç½®ä¸­ */
      gap: 10px; /* æŒ‰éˆ•ä¹‹é–“çš„é–“è· */
      margin-bottom: 15px; /* èˆ‡ä¸‹æ–¹è¨ˆç®—æ©Ÿå€å¡Šé–“è· */
    }
    
    #stayCalculator,
    #homeCalculator {
      margin-top: 0; /* ç§»é™¤é¡å¤–é–“è· */
    }
    
    .extra-item {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }
    
    .extra-item .extraName1,
    .extra-item .extraName2,
    .extra-item .homeExtraName1,
    .extra-item .homeExtraName2 {
      flex: 2; /* åç¨±æ¬„ä½å¯¬ä¸€é» */
    }
    
    .extra-item .extraAmount1,
    .extra-item .extraAmount2,
    .extra-item .homeExtraAmount1,
    .extra-item .homeExtraAmount2 {
      flex: 1.5; /* é‡‘é¡ä¸­ç­‰å¯¬ */
    }
    
    .extra-item .extraDiscount1,
    .extra-item .extraDiscount2,
    .extra-item .homeExtraDiscount1,
    .extra-item .homeExtraDiscount2 {
      flex: 1; /* æŠ˜æ‰£æœ€çª„ */
    }
    @media (max-width: 480px) {
    .extra-item input.extraName1,
    .extra-item input.extraName2,
    .extra-item input.homeExtraName1,
    .extra-item input.homeExtraName2 {
      min-width: 120px;
    }
    .extra-item input.extraAmount1,
    .extra-item input.extraAmount2,
    .extra-item input.homeExtraAmount1,
    .extra-item input.homeExtraAmount2 {
      min-width: 80px;
    }
  }

    /*ä½å®¿å€åŸŸèª¿æ•´*/
    .date-time-row {
        display: flex;
        gap: 10px;
        flex-wrap: wrap; /* å…è¨±æ›è¡Œ */
    }
    
    /* é–‹å§‹ã€çµæŸä½å®¿å€å¡Šé…ç½® */
    .start-section,
    .end-section {
        display: flex;
        gap: 32px;
        align-items: center;
        flex-wrap: wrap; /* å…è¨±æ›è¡Œ */
    }
    
    .start-section .date-field,
    .end-section .date-field {
        flex: 1 1 40%;     /* æ—¥æœŸæ¬„æ¯”ä¾‹ */
        min-width: 130px;  /* é˜²æ­¢éçª„ */
    }
    
    .start-section .time-field,
    .end-section .time-field {
        flex: 1 1 20%;     /* æ™‚é–“æ¬„æ¯”ä¾‹ */
        min-width: 100px;
    }
    
    .start-section input[type="date"],
    .end-section input[type="date"] {
        width: 100%;
        height: 32px;
        font-size: 14px;   /* é˜²æ­¢ iPhone é»æ“Šæ”¾å¤§ */
        padding: 4px 8px;
        border-radius: 6px;
        border: 1.5px solid #d72660;
        box-sizing: border-box;
    }
    
    .start-section input[type="time"],
    .end-section input[type="time"] {
        width: 80%;
        height: 32px;
        font-size: 14px;   /* é˜²æ­¢ iPhone é»æ“Šæ”¾å¤§ */
        padding: 4px 8px;
        border-radius: 6px;
        border: 1.5px solid #d72660;
        box-sizing: border-box;
    }
    .amount-discount-row {
        display: flex;
        justify-content: center;   /* æ•´è¡Œç½®ä¸­ï¼ˆä¾éœ€è¦å¯èª¿æ•´ï¼‰ */
        align-items: flex-end;     /* æ¬„ä½åº•éƒ¨å°é½Š */
        gap: 16px;                 /* æ¬„ä½é–“è· */
        margin-bottom: 18px;
    }

    .amount-field,
    .discount-field {
        display: flex;
        flex-direction: column;
        align-items: center;          /* æ–‡å­—ï¼†è¼¸å…¥æ¬„éƒ½ç½®ä¸­ï¼ˆæˆ–ç”¨flex-starté å·¦ï¼‰ */
    }

    .amount-field {
        width: 350px;     /* é‡‘é¡æ¬„å¯¬åº¦ */
    }
    .discount-field {
        width: 110px;     /* æŠ˜æ‰£æ¬„å¯¬åº¦ */
    }

    .amount-field input,
    .discount-field input {
        width: 100%;
        padding: 6px 8px;
        font-size: 16px;
        border: 1.5px solid #d72660;
        border-radius: 6px;
        box-sizing: border-box;
        text-align: center;
    }

    /* åˆ°åºœå€åŸŸèª¿æ•´ */
    .date-period-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap; /* å…è¨±æ›è¡Œ */
    }
     /* === å·¦å´å€å¡Šæ¨£å¼ === */
     .start-homesection {
      display: flex;
      gap: 16px;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .start-homesection .date-field {
      flex: 1 1 40%;
      min-width: 130px;
    }
    
    .start-homesection .period-field {
      flex: 1 1 20%;
      min-width: 100px;
    }
    
    .start-homesection input[type="date"],
    .end-homesection input[type="date"]{
      width: 90%;
      height: 32px;
      font-size: 14px;   /* é˜²æ­¢ iPhone é»æ“Šæ”¾å¤§ */
      padding: 4px 8px;
      border-radius: 6px;
      border: 1.5px solid #d72660;
      box-sizing: border-box;
    }
    }
    
    
    /* === å³å´å€å¡Šæ¨£å¼ === */
    .end-homesection {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .end-homesection .date-field {
      flex: 1 1 40%;
      min-width: 130px;
    }
    
    .end-homesection .period-field {
      flex: 1 1 20%;
      min-width: 100px;
    }
    
    .start-homesection .period-field select,
    .end-homesection .period-field select {
    width: 80%;
    height: 32px;
    font-size: 14px;
    padding: 4px 8px;
    border-radius: 6px;
    box-sizing: border-box;
    }

    
    .modal-content {
      width: 90%;
      max-width: 380px;
      font-size: 15px;
      padding: 18px 10px;
      margin: 15% auto;
    }

    @media (max-width: 480px) {
      .modal-content {
        width: 95%;
        max-width: 95vw;
        padding: 8px 2px;
        margin: 8% auto;
        font-size: 13px;
        border-radius: 12px;
      }
    }

  /*åˆ°åºœè¨ˆç®—å€*/
    .visit-main-row {
    display: flex;
    gap: 24px; /* æ¬„èˆ‡æ¬„é–“è· */
    align-items: flex-start;
    flex-wrap: nowrap; /* ç¦æ­¢æ›è¡Œï¼Œå…©æ¬„ä¿æŒä¸¦æ’ */
    }

    .visit-amount-left,
    .visit-discount-right {
    display: flex;
    flex-direction: column;
    gap: 2px;
    }

    .visit-amount-left {
    width: 200px; /* å›ºå®šå¯¬åº¦ */
    }

    .visit-discount-right {
    width: 100px; /* å›ºå®šå¯¬åº¦ */
    }

    .field-group label {
    font-weight: bold;
    color: #d72660;
    margin-bottom: 6px;
    text-align: left;
    }

    .field-group select,
    .field-group input {
      width: 100%;
      height: 38px;           /* ğŸ”¹ å›ºå®šé«˜åº¦ */
      padding: 0 8px;         /* å…§è·çµ±ä¸€ */
      font-size: 16px;
      border: 1.5px solid #d72660;
      border-radius: 6px;
      box-sizing: border-box;
      text-align: center;
      -webkit-appearance: none; /* ç§»é™¤ iOS é è¨­æ¨£å¼ */
      -moz-appearance: none;
      appearance: none;
    }
    

  </style>
</head>
<body>
  <div class="brand-header">
    <h1 class="brand-title">ğŸŒ¿ é¢¨æ»¾è‰å·¥ä½œå®¤</h1>
    <p class="brand-subtitle">å¯µç‰©ä½å®¿é‡‘é¡è¨ˆç®—æ©Ÿ</p>
    <!--
    <p class="brand-description">æˆ‘å€‘æ˜¯ä¸€ç¾¤å› ç‚ºæ„›å‹•ç‰©è€Œä»¥å‹•ç‰©ç¦åˆ©ä½œç‚ºé¦–è¦å‡ºç™¼é»çš„åœ˜éšŠï¼Œ<br>ä»¥ä¸æ‰“ä¸ç½µä¸”ç«™åœ¨å¯µç‰©è§’åº¦å»ç†è§£ä»–å€‘çš„éœ€æ±‚
<br>é›¶ææ‡¼çš„äº’å‹•æ¨¡å¼è®“æ¯å€‹æ¯›å°å­©éƒ½æ„›ä¸Šç…§è­·çš„å“¥å“¥å§Šå§Šï¼</p>

    <div class="service-values"><div class="value-item"><div class="value-chinese">é™ªä¼´</div><div class="value-english">Accompany</div></div><div class="value-item"><div class="value-chinese">å°ˆæ¥­</div><div class="value-english">Professional</div></div><div class="value-item"><div class="value-chinese">è€å¿ƒ</div><div class="value-english">Patience</div></div></div>
    <p style="color: #d72660; font-weight: bold; font-size: 16px; margin-top: 15px;">ã€Œæˆç‚ºæ¯›å­©ç¬¬äºŒä¿¡ä»»çš„äººã€</p>
    -->
  </div>

  <!-- æ¨¡å¼åˆ‡æ› -->
  <div class="mode-toggle">
    <button id="stayModeBtn" class="active" onclick="switchMode('stay')">ä½å®¿æ¨¡å¼</button>
    <button id="homeModeBtn" onclick="switchMode('home')">åˆ°åºœæ¨¡å¼</button>
  </div>

  <!-- ä½å®¿è¨ˆç®—æ©Ÿ 

  <div id="stayCalculator" class="calculator-section">
    <button class="clear-btn" onclick="clearAll()">ğŸ§¹ æ¸…é™¤æ‰€æœ‰æ¬„ä½</button>
    <h2>ğŸ  ä½å®¿é‡‘é¡è¨ˆç®—æ©Ÿ</h2>
    <label>ğŸ—“ï¸ é–‹å§‹æ—¥æœŸ</label><input type="date" id="startDate">
    <label>ğŸ•’ é–‹å§‹æ™‚é–“</label><input type="time" id="startTime" value="15:00">
    <label>ğŸ—“ï¸ çµæŸæ—¥æœŸ</label><input type="date" id="endDate">
    <label>ğŸ•’ çµæŸæ™‚é–“</label><input type="time" id="endTime" value="11:00">
    <label>ğŸ’° æ¯æ—¥é‡‘é¡</label><input type="number" id="rate" min="0" placeholder="ä¾‹å¦‚ï¼š1200">
    <label>ğŸ« æŠ˜æ‰£</label><input type="number" id="discount" min="0" max="1" step="0.01" value="1">
    <button onclick="calculate()">ğŸ§® è¨ˆç®—è²»ç”¨</button>
  </div>

  <!-- åˆ°åºœè¨ˆç®—æ©Ÿ 
  <div id="homeCalculator" class="calculator-section hidden">
    <button class="clear-btn" onclick="clearHome()">ğŸ§¹ æ¸…é™¤æ‰€æœ‰æ¬„ä½</button>
    <h2>ğŸ¾ åˆ°åºœé‡‘é¡è¨ˆç®—æ©Ÿ</h2>
    <label>ğŸ—“ï¸ é–‹å§‹æ—¥æœŸ</label><input type="date" id="homeStartDate">
    <label>â˜€ï¸ é–‹å§‹æ™‚æ®µ</label><select id="homeStartPeriod"><option value="am">ä¸Šåˆ</option><option value="noon">ä¸­åˆ</option><option value="pm">ä¸‹åˆ</option></select>
    <label>ğŸ—“ï¸ çµæŸæ—¥æœŸ</label><input type="date" id="homeEndDate">
    <label>ğŸŒ‡ çµæŸæ™‚æ®µ</label><select id="homeEndPeriod"><option value="am">ä¸Šåˆ</option><option value="noon">ä¸­åˆ</option><option value="pm">ä¸‹åˆ</option></select>
    <label>â±ï¸ æ¯æ¬¡åˆ°åºœæ™‚é–“ï¼ˆåˆ†é˜ï¼‰</label><select id="visitMinutes"><option value="30">30</option><option value="60">60</option></select>
    <label>ğŸ” æ¯å¤©å¹¾æ¬¡</label><input type="number" id="visitsPerDay" min="1" value="1">
    <label>ğŸ’° æ¯åŠå°æ™‚é‡‘é¡</label><input type="number" id="pricePerHalfHour" min="0">
    <label>ğŸ« æŠ˜æ‰£</label><input type="number" id="homeDiscount" min="0" max="1" step="0.01" value="1">
    <button onclick="calculateHome()">ğŸ§® è¨ˆç®—è²»ç”¨</button>
  </div>
  -->
  
  <!-- ä½å®¿è¨ˆç®—æ©Ÿ -->
<div id="stayCalculator" class="calculator-section">
  <button class="clear-btn" onclick="clearAll()">ğŸ§¹ æ¸…é™¤æ‰€æœ‰æ¬„ä½</button>
<h2>ğŸ  ä½å®¿é‡‘é¡è¨ˆç®—æ©Ÿ</h2>

<!-- é–‹å§‹ -->
<div class="date-time-row start-section">
  <div class="date-field">
    <label>ğŸ—“ï¸ é–‹å§‹æ—¥æœŸ</label>
    <input type="date" id="startDate">
  </div>
  <div class="time-field">
    <label>ğŸ•’ é–‹å§‹æ™‚é–“</label>
    <input type="time" id="startTime" value="00:00">
  </div>
</div>

<!-- çµæŸ -->
<div class="date-time-row end-section">
  <div class="date-field">
    <label>ğŸ—“ï¸ çµæŸæ—¥æœŸ</label>
    <input type="date" id="endDate">
  </div>
  <div class="time-field">
    <label>ğŸ•’ çµæŸæ™‚é–“</label>
    <input type="time" id="endTime" value="00:00">
  </div>
</div>

<div class="amount-discount-row">
    <div class="amount-field">
      <label>ğŸ’° æ¯æ—¥é‡‘é¡</label>
      <input type="number" id="rate" min="0"  inputmode="decimal" placeholder="">
    </div>
    <div class="discount-field">
      <label>ğŸ« æŠ˜æ‰£</label>
      <input type="number" id="discount" min="0" max="1" step="0.01" inputmode="decimal" value="1">
    </div>
</div>
  
  <h3>å…¶ä»–é›œé …</h3>
  <div class="extra-item">
    <input type="text" id="extraName1" class="extraName1" placeholder="åç¨±">
    <input type="number" id="extraAmount1" class="extraAmount1" min="0" inputmode="decimal" placeholder="é‡‘é¡">
    <input type="number" id="extraDiscount1" class="extraDiscount1" min="0" max="1" step="0.01" value="1" inputmode="decimal" placeholder="æŠ˜æ•¸">
  </div>
  <div class="extra-item">
    <input type="text" id="extraName2" class="extraName2" placeholder="åç¨±">
    <input type="number" id="extraAmount2" class="extraAmount2" min="0" inputmode="decimal" placeholder="é‡‘é¡">
    <input type="number" id="extraDiscount2" class="extraDiscount2" min="0" max="1" step="0.01" value="1" inputmode="decimal" placeholder="æŠ˜æ•¸">
  </div>
  <button onclick="calculate()">ğŸ§® è¨ˆç®—è²»ç”¨</button>
</div>

<!-- åˆ°åºœè¨ˆç®—æ©Ÿ -->
<div id="homeCalculator" class="calculator-section hidden">
  <button class="clear-btn" onclick="clearHome()">ğŸ§¹ æ¸…é™¤æ‰€æœ‰æ¬„ä½</button>
  <h2>ğŸ¾ åˆ°åºœé‡‘é¡è¨ˆç®—æ©Ÿ</h2>
 <!--<label>ğŸ—“ï¸ é–‹å§‹æ—¥æœŸ</label><input type="date" id="homeStartDate">
  <label>â˜€ï¸ é–‹å§‹æ™‚æ®µ</label><select id="homeStartPeriod"><option value="am">ä¸Šåˆ</option><option value="noon">ä¸­åˆ</option><option value="pm">ä¸‹åˆ</option></select>
  <label>ğŸ—“ï¸ çµæŸæ—¥æœŸ</label><input type="date" id="homeEndDate">
  <label>ğŸŒ‡ çµæŸæ™‚æ®µ</label><select id="homeEndPeriod"><option value="am">ä¸Šåˆ</option><option value="noon">ä¸­åˆ</option><option value="pm">ä¸‹åˆ</option></select>
  -->

  <!-- é–‹å§‹ -->
  <div class="date-period-row start-homesection">
    <div class="date-field">
      <label>ğŸ—“ï¸ é–‹å§‹æ—¥æœŸ</label>
      <input type="date" id="homeStartDate">
    </div>
    <div class="period-field">
      <label>â˜€ï¸ é–‹å§‹æ™‚æ®µ</label>
      <select id="homeStartPeriod">
        <option value="am">ä¸Šåˆ</option>
        <option value="noon">ä¸­åˆ</option>
        <option value="pm">ä¸‹åˆ</option>
      </select>
    </div>
  </div>
  
  <!-- çµæŸ -->
  <div class="date-period-row end-homesection">
    <div class="date-field">
      <label>ğŸ—“ï¸ çµæŸæ—¥æœŸ</label>
      <input type="date" id="homeEndDate">
    </div>
    <div class="period-field">
      <label>ğŸŒ‡ çµæŸæ™‚æ®µ</label>
      <select id="homeEndPeriod">
        <option value="am">ä¸Šåˆ</option>
        <option value="noon">ä¸­åˆ</option>
        <option value="pm">ä¸‹åˆ</option>
      </select>
    </div>
  </div>


  <div class="visit-main-row">
    <div class="visit-amount-left">
      <div class="field-group">
        <label>â±ï¸ æ¯æ¬¡åˆ°åºœæ™‚é–“ï¼ˆåˆ†é˜ï¼‰</label>
        <select id="visitMinutes">
          <option value="30">30</option>
          <option value="60">60</option>
        </select>
      </div>
      <div class="field-group">
        <label>ğŸ’° æ¯åŠå°æ™‚é‡‘é¡</label>
        <input type="number" id="pricePerHalfHour" inputmode="decimal" min="0">
      </div>
    </div>
  
    <div class="visit-discount-right">
      <div class="field-group">
        <label>ğŸ” æ¯å¤©å¹¾æ¬¡</label>
        <input type="number" id="visitsPerDay" min="1" inputmode="decimal" value="1">
      </div>
      <div class="field-group">
        <label>ğŸ« æŠ˜æ‰£</label>
        <input type="number" id="homeDiscount" min="0" max="1" step="0.01" inputmode="decimal" value="1">
      </div>
    </div>
  </div>
  

  <h3>å…¶ä»–é›œé …</h3>
  <div class="extra-item">
    <input type="text" id="homeExtraName1" class="homeExtraName1" placeholder="åç¨±">
    <input type="number" id="homeExtraAmount1" class="homeExtraAmount1" min="0" inputmode="decimal" placeholder="é‡‘é¡">
    <input type="number" id="homeExtraDiscount1" class="homeExtraDiscount1" min="0" max="1" step="0.01" inputmode="decimal" value="1" placeholder="æŠ˜æ•¸">
  </div>
  <div class="extra-item">
    <input type="text" id="homeExtraName2" class="homeExtraName2" placeholder="åç¨±">
    <input type="number" id="homeExtraAmount2" class="homeExtraAmount2" min="0" inputmode="decimal" placeholder="é‡‘é¡">
    <input type="number" id="homeExtraDiscount2" class="homeExtraDiscount2" min="0" max="1" step="0.01" value="1" inputmode="decimal" placeholder="æŠ˜æ•¸">
  </div>

  <button onclick="calculateHome()">ğŸ§® è¨ˆç®—è²»ç”¨</button>
</div>
  <!-- Modal å½ˆå‡ºè¦–çª— -->
  <div id="modal" class="modal">
    <div class="modal-content" id="modalContent">
      <div id="modalResultText"></div>
      <button class="confirm-btn" onclick="shareScreenshot()">ğŸ“¤ åˆ†äº«æˆªåœ–</button>
      <button class="confirm-btn" onclick="closeModal()">ç¢ºèª</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script>
    function setDefaultDates() {
  const today = new Date();
  const yyyy = today.getFullYear();
  const mm = String(today.getMonth() + 1).padStart(2, "0");
  const dd = String(today.getDate()).padStart(2, "0");

  // ä½å®¿é è¨­ï¼šé–‹å§‹æ—¥ = å‰ä¸€å¤©ï¼ŒçµæŸæ—¥ = ç•¶å¤©
  const prevDay = new Date(today);
  prevDay.setDate(today.getDate() - 1);
  const prevY = prevDay.getFullYear();
  const prevM = String(prevDay.getMonth() + 1).padStart(2, "0");
  const prevD = String(prevDay.getDate()).padStart(2, "0");
  document.getElementById("startDate").value = `${prevY}-${prevM}-${prevD}`;
  document.getElementById("endDate").value = `${yyyy}-${mm}-${dd}`;

  // åˆ°åºœé è¨­ï¼šé–‹å§‹æ—¥ = çµæŸæ—¥ = ç•¶å¤©
  document.getElementById("homeStartDate").value = `${yyyy}-${mm}-${dd}`;
  document.getElementById("homeEndDate").value = `${yyyy}-${mm}-${dd}`;
}
    window.onload=setDefaultDates;

/*
    function calculate(){const t=document.getElementById("startDate").value,e=document.getElementById("startTime").value,a=document.getElementById("endDate").value,n=document.getElementById("endTime").value,o=parseFloat(document.getElementById("rate").value),d=parseFloat(document.getElementById("discount").value);if(!t||!a||!e||!n||isNaN(o)||isNaN(d)||o<0||d<=0)return showModal("âš ï¸ è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½ä¸¦è¼¸å…¥æ­£ç¢ºæ•¸å€¼");const c=new Date(`${t}T${e}`),l=new Date(`${a}T${n}`);if(l<=c)return showModal("âš ï¸ çµæŸæ™‚é–“å¿…é ˆæ™šæ–¼é–‹å§‹æ™‚é–“");const u=l-c,s=1e3*60*60*24,r=Math.floor(u/s),m=u%s/36e5;let i=0;i=m>12?1:m>0?.5:0;const y=r+i,h=y*o,v=h*d;showModal(`ğŸ¾ <b style="color:#d72660;">ä½å®¿è¨ˆç®—çµæœ</b><br><br>ğŸ›ï¸ å…± <b>${y}</b> å¤©ï¼ˆå«åŠ æˆ <b>${i}</b> å¤©ï¼‰<br><br>ğŸ’° åŸåƒ¹ <b>${h.toLocaleString()}</b> å…ƒ<br><br>ğŸ« æŠ˜æ‰£å¾Œç¸½é‡‘é¡ï¼š<br><b style="font-size:22px;color:#d72660">${v.toLocaleString()}</b> å…ƒ<br><br><small style="color:#888;">è¬è¬æ‚¨é¸æ“‡é¢¨æ»¾è‰å·¥ä½œå®¤ ğŸŒ¿</small>`);}*/

function calculate() {
  const t = document.getElementById("startDate").value;
  const e = document.getElementById("startTime").value;
  const a = document.getElementById("endDate").value;
  const n = document.getElementById("endTime").value;
  const o = parseFloat(document.getElementById("rate").value);
  const d = parseFloat(document.getElementById("discount").value);

  if (!t || !a || !e || !n || isNaN(o) || isNaN(d) || o < 0 || d <= 0)
    return showModal("âš ï¸ è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½ä¸¦è¼¸å…¥æ­£ç¢ºæ•¸å€¼");

  const c = new Date(`${t}T${e}`);
  const l = new Date(`${a}T${n}`);
  if (l <= c) return showModal("âš ï¸ çµæŸæ™‚é–“å¿…é ˆæ™šæ–¼é–‹å§‹æ™‚é–“");

  const u = l - c;
  const s = 1000 * 60 * 60 * 24;
  const r = Math.floor(u / s);
  const m = (u % s) / 3600000;
  const addDay = m > 12 ? 1 : (m > 0 ? 0.5 : 0);
  const totalDays = r + addDay;

  const basePrice = totalDays * o;
  const totalBase = basePrice * d;

  // é›œé …æ˜ç´°
  let extrasText = "";
  const extra1Name = document.getElementById("extraName1").value.trim();
  const extra1Amount = parseFloat(document.getElementById("extraAmount1").value) || 0;
  const extra1Discount = parseFloat(document.getElementById("extraDiscount1").value) || 1;
  const extra1Total = extra1Amount * extra1Discount;
  if (extra1Name) extrasText += `${extra1Name}ï¼š${extra1Total.toLocaleString()} å…ƒ<br>`;

  const extra2Name = document.getElementById("extraName2").value.trim();
  const extra2Amount = parseFloat(document.getElementById("extraAmount2").value) || 0;
  const extra2Discount = parseFloat(document.getElementById("extraDiscount2").value) || 1;
  const extra2Total = extra2Amount * extra2Discount;
  if (extra2Name) extrasText += `${extra2Name}ï¼š${extra2Total.toLocaleString()} å…ƒ<br>`;

  const finalPrice = totalBase + extra1Total + extra2Total;

  showModal(`
    ğŸ  <b style="color:#d72660;">ä½å®¿è¨ˆç®—çµæœ</b><br><br>
    ğŸ›ï¸ å…± <b>${totalDays}</b> å¤©ï¼ˆå«åŠ æˆ <b>${addDay}</b> å¤©ï¼‰<br><br>
    ğŸ’° åŸåƒ¹ <b>${basePrice.toLocaleString()}</b> å…ƒ<br>
    ğŸ« æŠ˜æ‰£å¾Œé‡‘é¡ï¼š<b>${totalBase.toLocaleString()}</b> å…ƒ<br><br>
    ${extrasText ? `<b>é›œé …ï¼š</b><br>${extrasText}<br>` : ""}
    <b style="font-size:22px;color:#d72660">${finalPrice.toLocaleString()}</b> å…ƒ<br><br>
    <small style="color:#888;">è¬è¬æ‚¨é¸æ“‡é¢¨æ»¾è‰å·¥ä½œå®¤ ğŸŒ¿</small>
  `);
}

    /*function calculateHome(){const t=document.getElementById("homeStartDate").value,e=document.getElementById("homeEndDate").value,a=document.getElementById("homeStartPeriod").value,n=document.getElementById("homeEndPeriod").value,o=parseInt(document.getElementById("visitMinutes").value),d=parseInt(document.getElementById("visitsPerDay").value),c=parseFloat(document.getElementById("pricePerHalfHour").value),l=parseFloat(document.getElementById("homeDiscount").value);if(!t||!e||isNaN(o)||isNaN(d)||isNaN(c)||isNaN(l))return showModal("âš ï¸ è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½ä¸¦è¼¸å…¥æ­£ç¢ºæ•¸å€¼");const u=new Date(t),s=new Date(e);if(s<u)return showModal("âš ï¸ çµæŸæ—¥æœŸä¸å¯æ—©æ–¼é–‹å§‹æ—¥æœŸ");let r=(s-u)/864e5;r+="pm"===a&&"am"===n?0:"am"===a&&"pm"===n?1:.5;const m=o*d*r,i=m/30*c,y=i*l;showModal(`ğŸ  <b style="color:#d72660;">åˆ°åºœè¨ˆç®—çµæœ</b><br><br>ğŸ“… å…± <b>${r}</b> å¤©ï¼Œå¹³å‡æ¯æ—¥ ${d} æ¬¡<br>â±ï¸ æ¯æ¬¡ ${o} åˆ†é˜ï¼Œå…± ${m} åˆ†é˜<br><br>ğŸ’° åŸåƒ¹ <b>${i.toLocaleString()}</b> å…ƒ<br><br>ğŸ« æŠ˜æ‰£å¾Œç¸½é‡‘é¡ï¼š<br><b style="font-size:22px;color:#d72660">${y.toLocaleString()}</b> å…ƒ<br><br><small style="color:#888;">è¬è¬æ‚¨é¸æ“‡é¢¨æ»¾è‰å·¥ä½œå®¤ ğŸŒ¿</small>`);}*/
    
function calculateHome() {
  const t = document.getElementById("homeStartDate").value;
  const e = document.getElementById("homeEndDate").value;
  const a = document.getElementById("homeStartPeriod").value;
  const n = document.getElementById("homeEndPeriod").value;
  const o = parseInt(document.getElementById("visitMinutes").value);
  const d = parseInt(document.getElementById("visitsPerDay").value);
  const c = parseFloat(document.getElementById("pricePerHalfHour").value);
  const l = parseFloat(document.getElementById("homeDiscount").value);
  if (!t || !e || isNaN(o) || isNaN(d) || isNaN(c) || isNaN(l))
    return showModal("âš ï¸ è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½ä¸¦è¼¸å…¥æ­£ç¢ºæ•¸å€¼");

  const u = new Date(t);
  const s = new Date(e);
  if (s < u) return showModal("âš ï¸ çµæŸæ—¥æœŸä¸å¯æ—©æ–¼é–‹å§‹æ—¥æœŸ");

  let dayCount = (s - u) / 86400000;
  dayCount += (a === "pm" && n === "am") ? 0 : (a === "am" && n === "pm") ? 1 : 0.5;

  const totalMinutes = o * d * dayCount;
  const basePrice = totalMinutes / 30 * c * l;

  // é›œé …æ˜ç´°
  let extrasText = "";
  const extra1Name = document.getElementById("homeExtraName1").value.trim();
  const extra1Amount = parseFloat(document.getElementById("homeExtraAmount1").value) || 0;
  const extra1Discount = parseFloat(document.getElementById("homeExtraDiscount1").value) || 1;
  const extra1Total = extra1Amount * extra1Discount;
  if (extra1Name) extrasText += `${extra1Name}ï¼š${extra1Total.toLocaleString()} å…ƒ<br>`;

  const extra2Name = document.getElementById("homeExtraName2").value.trim();
  const extra2Amount = parseFloat(document.getElementById("homeExtraAmount2").value) || 0;
  const extra2Discount = parseFloat(document.getElementById("homeExtraDiscount2").value) || 1;
  const extra2Total = extra2Amount * extra2Discount;
  if (extra2Name) extrasText += `${extra2Name}ï¼š${extra2Total.toLocaleString()} å…ƒ<br>`;

  const finalPrice = basePrice + extra1Total + extra2Total;

  showModal(`
    ğŸ¾ <b style="color:#d72660;">åˆ°åºœè¨ˆç®—çµæœ</b><br><br>
    ğŸ“… å…± <b>${dayCount}</b> å¤©ï¼Œå¹³å‡æ¯æ—¥ ${d} æ¬¡<br>
    â±ï¸ æ¯æ¬¡ ${o} åˆ†é˜ï¼Œå…± ${totalMinutes} åˆ†é˜<br><br>
    ğŸ« æŠ˜æ‰£å¾Œé‡‘é¡ï¼š<b>${basePrice.toLocaleString()}</b> å…ƒ<br><br>
    ${extrasText ? `<b>é›œé …ï¼š</b><br>${extrasText}<br>` : ""}
    <b style="font-size:22px;color:#d72660">${finalPrice.toLocaleString()}</b> å…ƒ<br><br>
    <small style="color:#888;">è¬è¬æ‚¨é¸æ“‡é¢¨æ»¾è‰å·¥ä½œå®¤ ğŸŒ¿</small>
  `);
}

    function showModal(t){document.getElementById("modalResultText").innerHTML=t,document.getElementById("modal").style.display="block",document.body.style.overflow="hidden";}
    function closeModal(){document.getElementById("modal").style.display="none",document.body.style.overflow="auto";}
    function clearAll(){
  document.getElementById("startDate").value="",
  document.getElementById("startTime").value="00:00",
  document.getElementById("endDate").value="", 
  document.getElementById("endTime").value="00:00",
  document.getElementById("rate").value="",
  document.getElementById("discount").value="1",
  document.getElementById("extraName1").value = "";
  document.getElementById("extraAmount1").value = "";  
  document.getElementById("extraDiscount1").value = 1;
  document.getElementById("extraName2").value = "";
  document.getElementById("extraAmount2").value = "";  
  document.getElementById("extraDiscount2").value = 1;
    }

    function clearHome() {
  document.getElementById("homeStartDate").value = "";
  document.getElementById("homeStartPeriod").value = "am";
  document.getElementById("homeEndDate").value = "";
  document.getElementById("homeEndPeriod").value = "am";
  document.getElementById("visitMinutes").value = "30";
  document.getElementById("visitsPerDay").value = 1;
  document.getElementById("pricePerHalfHour").value = "";
  document.getElementById("homeDiscount").value = 1;
  document.getElementById("homeExtraName1").value = "";
  document.getElementById("homeExtraAmount1").value = "";  document.getElementById("homeExtraDiscount1").value = 1;
  document.getElementById("homeExtraName2").value = "";
  document.getElementById("homeExtraAmount2").value = "";  document.getElementById("homeExtraDiscount2").value = 1;
}
            document.getElementById("modal").onclick=function(t){t.target===document.getElementById("modal")&&closeModal();}
    window.onkeydown=function(t){"Escape"===t.key&&closeModal();}
    function switchMode(t){"stay"===t?(stayModeBtn.classList.add("active"),homeModeBtn.classList.remove("active"),stayCalculator.classList.remove("hidden"),homeCalculator.classList.add("hidden")):(stayModeBtn.classList.remove("active"),homeModeBtn.classList.add("active"),stayCalculator.classList.add("hidden"),homeCalculator.classList.remove("hidden"));}
    
    // --- æˆªåœ–ä¸¦åˆ†äº« ---
    async function shareScreenshot() {
      const shareBtn = document.querySelector('#modalContent button[onclick="shareScreenshot()"]');
      const confirmBtn = document.querySelector('#modalContent button[onclick="closeModal()"]');
    
      // æš«æ™‚éš±è—æŒ‰éˆ•
      shareBtn.style.display = 'none';
      confirmBtn.style.display = 'none';
    
      // æˆªåœ–
      const target = document.getElementById('modalContent');
      const canvas = await html2canvas(target, { scale: 2, backgroundColor: null });
      const dataUrl = canvas.toDataURL('image/png');
    
      // æ¢å¾©æŒ‰éˆ•é¡¯ç¤º
      shareBtn.style.display = '';
      confirmBtn.style.display = '';
    
      // åˆ†äº«æˆ–ä¸‹è¼‰
      const res = await fetch(dataUrl);
      const blob = await res.blob();
      const file = new File([blob], 'result.png', { type: 'image/png' });
      if (navigator.canShare && navigator.canShare({ files: [file] })) {
        await navigator.share({ files: [file]});
      } else {
        const link = document.createElement('a');
        link.href = dataUrl;
        link.download = 'result.png';
        link.click();
        alert('æ‚¨çš„è£ç½®ä¸æ”¯æ´ç›´æ¥åˆ†äº«ï¼Œå·²ä¸‹è¼‰æˆªåœ–');
      }
    }
  </script>
</body>
</html>
